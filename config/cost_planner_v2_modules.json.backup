{
  "version": "2.0.0",
  "metadata": {
    "product_key": "cost_planner_v2",
    "display_name": "Financial Assessment",
    "description": "Comprehensive financial planning for senior care costs",
    "requires_auth": false,
    "completion_required": ["income_assets"]
  },
  "modules": [
    {
      "key": "income_assets",
      "title": "Income & Assets",
      "icon": "üíµ",
      "description": "Sources of income and available assets for care costs",
      "estimated_time": "3-5 min",
      "required": true,
      "sort_order": 1,
      "sections": [
        {
          "id": "monthly_income",
          "title": "Monthly Income Sources",
          "icon": "üí∞",
          "help_text": "This helps us determine how much monthly income is available for care costs",
          "fields": [
            {
              "key": "monthly_income_ss",
              "label": "Social Security Benefits",
              "type": "currency",
              "required": false,
              "min": 0,
              "max": 10000,
              "step": 100,
              "default": 0,
              "help": "Monthly Social Security income",
              "display_format": "$/month",
              "validation": {
                "type": "range",
                "min": 0,
                "max": 10000
              }
            },
            {
              "key": "monthly_income_pension",
              "label": "Pension Income",
              "type": "currency",
              "required": false,
              "min": 0,
              "max": 20000,
              "step": 100,
              "default": 0,
              "help": "Monthly pension or annuity income",
              "display_format": "$/month"
            },
            {
              "key": "monthly_income_other",
              "label": "Other Income",
              "description": "investment, rental, part-time work",
              "type": "currency",
              "required": false,
              "min": 0,
              "max": 50000,
              "step": 100,
              "default": 0,
              "help": "Investment income, rental income, part-time work, etc.",
              "display_format": "$/month"
            }
          ],
          "summary": {
            "type": "calculated",
            "label": "Total Monthly Income",
            "formula": "sum(monthly_income_ss, monthly_income_pension, monthly_income_other)",
            "display_format": "${:,.0f}"
          }
        },
        {
          "id": "assets",
          "title": "Available Assets",
          "icon": "üè¶",
          "help_text": "Include only assets available for care costs (excluding primary residence if staying)",
          "layout": "two_column",
          "fields": [
            {
              "key": "liquid_assets",
              "label": "Liquid Assets",
              "description": "checking, savings, CDs",
              "type": "currency",
              "required": false,
              "min": 0,
              "max": 10000000,
              "step": 1000,
              "default": 0,
              "help": "Easily accessible cash and savings",
              "column": 1
            },
            {
              "key": "property_value",
              "label": "Property Value",
              "description": "excluding primary residence",
              "type": "currency",
              "required": false,
              "min": 0,
              "max": 50000000,
              "step": 10000,
              "default": 0,
              "help": "Investment properties, vacation homes, land",
              "column": 1
            },
            {
              "key": "retirement_accounts",
              "label": "Retirement Accounts",
              "description": "401k, IRA, etc.",
              "type": "currency",
              "required": false,
              "min": 0,
              "max": 10000000,
              "step": 1000,
              "default": 0,
              "help": "Value of retirement accounts available for withdrawal",
              "column": 2
            },
            {
              "key": "other_assets",
              "label": "Other Assets",
              "description": "investments, bonds, etc.",
              "type": "currency",
              "required": false,
              "min": 0,
              "max": 10000000,
              "step": 1000,
              "default": 0,
              "help": "Stocks, bonds, mutual funds, other investments",
              "column": 2
            }
          ],
          "summary": {
            "type": "calculated",
            "label": "Total Available Assets",
            "formula": "sum(liquid_assets, property_value, retirement_accounts, other_assets)",
            "display_format": "${:,.0f}"
          }
        }
      ],
      "output_contract": {
        "monthly_income_ss": "number",
        "monthly_income_pension": "number",
        "monthly_income_other": "number",
        "total_monthly_income": "calculated",
        "liquid_assets": "number",
        "property_value": "number",
        "retirement_accounts": "number",
        "other_assets": "number",
        "total_assets": "calculated"
      },
      "insights": [
        {
          "condition": "total_monthly_income > 0 AND total_assets > 0",
          "type": "info",
          "message": "üí° **Quick Insight:** With ${total_monthly_income:,.0f}/month income and ${total_assets:,.0f} in assets, you have substantial resources to work with. We'll calculate exactly how long these will last in the next steps."
        }
      ]
    },
    {
      "key": "monthly_costs",
      "title": "Monthly Costs",
      "icon": "üí∞",
      "description": "Detailed breakdown of care costs and additional services",
      "estimated_time": "4-6 min",
      "required": true,
      "sort_order": 2,
      "dependencies": {
        "requires_gcp": false,
        "recommended_gcp": true
      },
      "sections": [
        {
          "id": "base_care",
          "title": "Base Care Cost",
          "icon": "üè•",
          "help_text": "Base monthly cost for your recommended care level",
          "fields": [
            {
              "key": "base_care_cost",
              "label": "Base Monthly Cost",
              "type": "display_only",
              "source": "gcp_tier_lookup",
              "help": "National average for your care level",
              "display_format": "${:,.0f}"
            }
          ]
        },
        {
          "id": "regional",
          "title": "Regional Cost Adjustment",
          "icon": "üìç",
          "fields": [
            {
              "key": "zip_code",
              "label": "ZIP Code",
              "description": "for regional cost adjustment",
              "type": "text",
              "required": false,
              "max_length": 5,
              "placeholder": "90210",
              "help": "Enter ZIP code for regional cost adjustment",
              "validation": {
                "type": "regex",
                "pattern": "^\\d{5}$",
                "message": "ZIP code must be 5 digits"
              }
            },
            {
              "key": "regional_multiplier",
              "label": "Regional Adjustment",
              "type": "calculated",
              "source": "regional_lookup",
              "display_format": "{:+.0%}"
            }
          ]
        },
        {
          "id": "care_hours",
          "title": "Care Hours",
          "icon": "‚è∞",
          "visible_if": {
            "condition": "gcp_tier == 'in_home'"
          },
          "fields": [
            {
              "key": "care_hours_per_week",
              "label": "Weekly Care Hours",
              "description": "0-168 hours",
              "type": "slider",
              "min": 0,
              "max": 168,
              "step": 1,
              "default": 20,
              "help": "Number of hours of professional care per week"
            }
          ],
          "calculations": [
            {
              "key": "hourly_rate",
              "formula": "25 * regional_multiplier"
            },
            {
              "key": "monthly_hours",
              "formula": "care_hours_per_week * 4.33"
            },
            {
              "key": "monthly_care_cost",
              "formula": "hourly_rate * monthly_hours"
            }
          ]
        },
        {
          "id": "additional_services",
          "title": "Additional Services",
          "icon": "üéØ",
          "help_text": "Select services that apply (costs vary by tier and region)",
          "fields": [
            {
              "key": "service_transportation",
              "label": "Medical Transportation",
              "type": "checkbox",
              "cost": 200,
              "cost_applies_regional_multiplier": true,
              "default": false
            },
            {
              "key": "service_therapy",
              "label": "Physical/Occupational Therapy",
              "type": "checkbox",
              "cost": 300,
              "cost_applies_regional_multiplier": true,
              "default": false
            },
            {
              "key": "service_activities",
              "label": "Social Activities & Programs",
              "type": "checkbox",
              "cost": 150,
              "cost_applies_regional_multiplier": true,
              "default": false
            },
            {
              "key": "service_meals",
              "label": "Meal Delivery Service",
              "type": "checkbox",
              "cost": 250,
              "cost_applies_regional_multiplier": true,
              "default": false
            },
            {
              "key": "service_housekeeping",
              "label": "Housekeeping & Laundry",
              "type": "checkbox",
              "cost": 200,
              "cost_applies_regional_multiplier": true,
              "default": false
            },
            {
              "key": "service_medication",
              "label": "Medication Management",
              "type": "checkbox",
              "cost": 100,
              "cost_applies_regional_multiplier": true,
              "default": false
            },
            {
              "key": "service_personal_care",
              "label": "Additional Personal Care",
              "type": "checkbox",
              "cost": 350,
              "cost_applies_regional_multiplier": true,
              "default": false
            }
          ],
          "summary": {
            "type": "calculated",
            "label": "Additional Services Total",
            "formula": "sum_checked_services_with_multiplier",
            "display_format": "${:,.0f}"
          }
        }
      ],
      "output_contract": {
        "care_tier": "string",
        "zip_code": "string",
        "regional_multiplier": "number",
        "region_name": "string",
        "base_care_cost": "number",
        "care_hours_per_week": "number",
        "monthly_care_cost": "number",
        "additional_services": "object",
        "additional_services_cost": "number",
        "total_monthly_cost": "calculated",
        "annual_cost": "calculated"
      }
    },
    {
      "key": "coverage",
      "title": "Coverage & Benefits",
      "icon": "üè•",
      "description": "Insurance, VA benefits, and other coverage sources",
      "estimated_time": "5-7 min",
      "required": false,
      "sort_order": 3,
      "sections": [
        {
          "id": "ltc_insurance",
          "title": "Long-Term Care Insurance",
          "icon": "üíº",
          "fields": [
            {
              "key": "has_ltc_insurance",
              "label": "Do you have long-term care insurance?",
              "type": "checkbox",
              "default": false
            },
            {
              "key": "ltc_monthly_benefit",
              "label": "Monthly Benefit Amount",
              "description": "$",
              "type": "currency",
              "min": 0,
              "max": 20000,
              "step": 100,
              "default": 0,
              "help": "How much does your policy pay per month?",
              "visible_if": {
                "field": "has_ltc_insurance",
                "equals": true
              }
            }
          ]
        },
        {
          "id": "va_benefits",
          "title": "Veteran Benefits (Aid & Attendance)",
          "icon": "üéñÔ∏è",
          "fields": [
            {
              "key": "is_veteran",
              "label": "Are you (or your spouse) a wartime veteran?",
              "type": "checkbox",
              "help": "Veterans and surviving spouses may qualify for Aid & Attendance benefits",
              "default": false
            },
            {
              "key": "va_status",
              "label": "Your Status",
              "type": "select",
              "options": [
                {"value": "not_sure", "label": "Not sure"},
                {"value": "veteran_alone", "label": "Veteran alone"},
                {"value": "veteran_with_spouse", "label": "Veteran with spouse"},
                {"value": "surviving_spouse", "label": "Surviving spouse"}
              ],
              "default": "not_sure",
              "visible_if": {
                "field": "is_veteran",
                "equals": true
              }
            },
            {
              "key": "va_monthly_benefit",
              "label": "Estimated VA Benefit",
              "type": "calculated",
              "source": "va_benefit_lookup",
              "display_format": "${:,.0f}/mo",
              "visible_if": {
                "field": "is_veteran",
                "equals": true
              }
            }
          ],
          "info_boxes": [
            {
              "type": "success",
              "visible_if": {
                "field": "is_veteran",
                "equals": true
              },
              "content": "### ‚úÖ You may be eligible for VA Aid & Attendance!\n\n**Current maximum monthly benefits (2025):**\n- Veteran alone: $2,379\n- Veteran with spouse: $2,829\n- Surviving spouse: $1,537\n\n**Requirements:**\n- Served during wartime\n- Need help with daily living activities\n- Meet income/asset limits"
            }
          ]
        },
        {
          "id": "medicare",
          "title": "Medicare",
          "icon": "üè•",
          "fields": [
            {
              "key": "has_medicare",
              "label": "Are you enrolled in Medicare?",
              "type": "checkbox",
              "default": false
            },
            {
              "key": "medicare_type",
              "label": "Does Medicare cover any of your current care costs?",
              "type": "select",
              "options": [
                {"value": "no", "label": "No"},
                {"value": "skilled_nursing", "label": "Yes - Skilled nursing (short-term)"},
                {"value": "home_health", "label": "Yes - Home health (medical)"}
              ],
              "default": "no",
              "visible_if": {
                "field": "has_medicare",
                "equals": true
              }
            },
            {
              "key": "medicare_coverage",
              "label": "Estimated Monthly Medicare Contribution",
              "description": "$",
              "type": "currency",
              "min": 0,
              "max": 5000,
              "step": 100,
              "default": 0,
              "help": "Estimate how much Medicare pays toward your care",
              "visible_if": {
                "field": "medicare_type",
                "not_equals": "no"
              }
            }
          ]
        },
        {
          "id": "medicaid",
          "title": "Medicaid",
          "icon": "üèõÔ∏è",
          "fields": [
            {
              "key": "has_medicaid",
              "label": "Are you enrolled in Medicaid or considering applying?",
              "type": "checkbox",
              "default": false
            },
            {
              "key": "medicaid_status",
              "label": "Medicaid Status",
              "type": "select",
              "options": [
                {"value": "planning", "label": "Planning to apply"},
                {"value": "pending", "label": "Application pending"},
                {"value": "enrolled", "label": "Currently enrolled"}
              ],
              "default": "planning",
              "visible_if": {
                "field": "has_medicaid",
                "equals": true
              }
            },
            {
              "key": "medicaid_coverage",
              "label": "Monthly Medicaid Coverage",
              "description": "$",
              "type": "currency",
              "min": 0,
              "max": 10000,
              "step": 100,
              "default": 0,
              "help": "How much does Medicaid pay toward your care?",
              "visible_if": {
                "field": "medicaid_status",
                "equals": "enrolled"
              }
            }
          ]
        },
        {
          "id": "other_coverage",
          "title": "Other Coverage",
          "icon": "üí≥",
          "fields": [
            {
              "key": "other_coverage",
              "label": "Other Insurance or Assistance",
              "description": "$/month",
              "type": "currency",
              "min": 0,
              "max": 10000,
              "step": 100,
              "default": 0,
              "help": "Private insurance, family assistance, etc."
            }
          ]
        }
      ],
      "output_contract": {
        "has_ltc_insurance": "boolean",
        "ltc_monthly_benefit": "number",
        "is_veteran": "boolean",
        "va_monthly_benefit": "number",
        "has_medicare": "boolean",
        "medicare_coverage": "number",
        "has_medicaid": "boolean",
        "medicaid_coverage": "number",
        "other_coverage": "number",
        "total_coverage": "calculated"
      }
    },
    {
      "key": "monthly_expenses",
      "title": "Monthly Expenses",
      "icon": "üí≥",
      "description": "Current household expenses and budget",
      "estimated_time": "3-4 min",
      "required": false,
      "sort_order": 4,
      "sections": [
        {
          "id": "housing_costs",
          "title": "Housing Costs",
          "icon": "üè†",
          "help_text": "Include mortgage/rent, property taxes, insurance, and HOA fees",
          "layout": "two_column",
          "fields": [
            {
              "key": "housing_type",
              "label": "Housing Situation",
              "type": "select",
              "options": [
                {"value": "own_with_mortgage", "label": "Own with mortgage"},
                {"value": "own_outright", "label": "Own outright"},
                {"value": "rent", "label": "Rent"},
                {"value": "live_with_family", "label": "Live with family"}
              ],
              "default": "own_with_mortgage",
              "column": 1
            },
            {
              "key": "monthly_housing",
              "label": "Monthly Housing Cost",
              "description": "mortgage/rent",
              "type": "currency",
              "min": 0,
              "max": 20000,
              "step": 100,
              "default": 0,
              "help": "Total monthly housing payment including taxes and insurance",
              "column": 1
            },
            {
              "key": "property_taxes",
              "label": "Property Taxes",
              "description": "if not included above",
              "type": "currency",
              "min": 0,
              "max": 5000,
              "step": 50,
              "default": 0,
              "help": "Monthly property tax if not included in mortgage",
              "column": 2,
              "visible_if": {
                "field": "housing_type",
                "not_equals": "rent"
              }
            },
            {
              "key": "hoa_fees",
              "label": "HOA/Condo Fees",
              "type": "currency",
              "min": 0,
              "max": 2000,
              "step": 50,
              "default": 0,
              "help": "Homeowners association or condo fees",
              "column": 2
            }
          ],
          "summary": {
            "type": "calculated",
            "label": "Total Housing",
            "formula": "sum(monthly_housing, property_taxes, hoa_fees)",
            "display_format": "${:,.0f}/mo"
          }
        },
        {
          "id": "utilities",
          "title": "Utilities",
          "icon": "üí°",
          "layout": "two_column",
          "fields": [
            {
              "key": "electric_gas",
              "label": "Electric & Gas",
              "type": "currency",
              "min": 0,
              "max": 1000,
              "step": 10,
              "default": 0,
              "column": 1
            },
            {
              "key": "water_sewer",
              "label": "Water & Sewer",
              "type": "currency",
              "min": 0,
              "max": 500,
              "step": 10,
              "default": 0,
              "column": 1
            },
            {
              "key": "phone_internet",
              "label": "Phone & Internet",
              "type": "currency",
              "min": 0,
              "max": 500,
              "step": 10,
              "default": 0,
              "column": 2
            },
            {
              "key": "cable_streaming",
              "label": "Cable/Streaming Services",
              "type": "currency",
              "min": 0,
              "max": 300,
              "step": 10,
              "default": 0,
              "column": 2
            }
          ],
          "summary": {
            "type": "calculated",
            "label": "Total Utilities",
            "formula": "sum(electric_gas, water_sewer, phone_internet, cable_streaming)",
            "display_format": "${:,.0f}/mo"
          }
        },
        {
          "id": "living_expenses",
          "title": "Living Expenses",
          "icon": "üõí",
          "layout": "two_column",
          "fields": [
            {
              "key": "groceries",
              "label": "Groceries & Food",
              "type": "currency",
              "min": 0,
              "max": 2000,
              "step": 50,
              "default": 0,
              "help": "Monthly food and grocery expenses",
              "column": 1
            },
            {
              "key": "dining_out",
              "label": "Dining Out",
              "type": "currency",
              "min": 0,
              "max": 1000,
              "step": 25,
              "default": 0,
              "column": 1
            },
            {
              "key": "transportation",
              "label": "Transportation",
              "description": "car payment, gas, insurance",
              "type": "currency",
              "min": 0,
              "max": 2000,
              "step": 50,
              "default": 0,
              "help": "Car payments, gas, insurance, maintenance",
              "column": 2
            },
            {
              "key": "personal_care",
              "label": "Personal Care",
              "description": "clothing, haircuts, etc.",
              "type": "currency",
              "min": 0,
              "max": 500,
              "step": 25,
              "default": 0,
              "column": 2
            }
          ]
        },
        {
          "id": "healthcare",
          "title": "Healthcare Expenses",
          "icon": "üè•",
          "layout": "two_column",
          "fields": [
            {
              "key": "health_insurance",
              "label": "Health Insurance Premiums",
              "type": "currency",
              "min": 0,
              "max": 2000,
              "step": 50,
              "default": 0,
              "help": "Monthly premium not covered by employer",
              "column": 1
            },
            {
              "key": "prescriptions",
              "label": "Prescription Medications",
              "type": "currency",
              "min": 0,
              "max": 1000,
              "step": 25,
              "default": 0,
              "column": 1
            },
            {
              "key": "medical_copays",
              "label": "Medical Copays & Out-of-Pocket",
              "type": "currency",
              "min": 0,
              "max": 1000,
              "step": 25,
              "default": 0,
              "help": "Average monthly medical expenses",
              "column": 2
            },
            {
              "key": "dental_vision",
              "label": "Dental & Vision",
              "type": "currency",
              "min": 0,
              "max": 500,
              "step": 25,
              "default": 0,
              "help": "Average monthly dental and vision expenses",
              "column": 2
            }
          ],
          "summary": {
            "type": "calculated",
            "label": "Total Healthcare",
            "formula": "sum(health_insurance, prescriptions, medical_copays, dental_vision)",
            "display_format": "${:,.0f}/mo"
          }
        },
        {
          "id": "other_expenses",
          "title": "Other Monthly Expenses",
          "icon": "üìã",
          "layout": "two_column",
          "fields": [
            {
              "key": "debt_payments",
              "label": "Debt Payments",
              "description": "credit cards, loans",
              "type": "currency",
              "min": 0,
              "max": 5000,
              "step": 50,
              "default": 0,
              "help": "Credit card minimums, personal loans, etc.",
              "column": 1
            },
            {
              "key": "insurance_other",
              "label": "Other Insurance",
              "description": "life, disability, etc.",
              "type": "currency",
              "min": 0,
              "max": 1000,
              "step": 25,
              "default": 0,
              "column": 1
            },
            {
              "key": "entertainment",
              "label": "Entertainment & Hobbies",
              "type": "currency",
              "min": 0,
              "max": 1000,
              "step": 25,
              "default": 0,
              "column": 2
            },
            {
              "key": "miscellaneous",
              "label": "Miscellaneous",
              "type": "currency",
              "min": 0,
              "max": 1000,
              "step": 25,
              "default": 0,
              "help": "Other regular monthly expenses",
              "column": 2
            }
          ]
        }
      ],
      "output_contract": {
        "housing_type": "string",
        "monthly_housing": "number",
        "property_taxes": "number",
        "hoa_fees": "number",
        "total_housing": "calculated",
        "electric_gas": "number",
        "water_sewer": "number",
        "phone_internet": "number",
        "cable_streaming": "number",
        "total_utilities": "calculated",
        "groceries": "number",
        "dining_out": "number",
        "transportation": "number",
        "personal_care": "number",
        "health_insurance": "number",
        "prescriptions": "number",
        "medical_copays": "number",
        "dental_vision": "number",
        "total_healthcare": "calculated",
        "debt_payments": "number",
        "insurance_other": "number",
        "entertainment": "number",
        "miscellaneous": "number",
        "total_monthly_expenses": "calculated"
      },
      "insights": [
        {
          "condition": "total_monthly_expenses > total_monthly_income",
          "type": "warning",
          "message": "‚ö†Ô∏è **Budget Alert:** Your current expenses (${total_monthly_expenses:,.0f}/mo) exceed your income (${total_monthly_income:,.0f}/mo). Adding care costs will increase this gap."
        },
        {
          "condition": "total_monthly_expenses < total_monthly_income * 0.8",
          "type": "success",
          "message": "‚úÖ **Strong Budget Position:** You're living within your means with ${total_monthly_income - total_monthly_expenses:,.0f}/mo in surplus. This provides flexibility for care costs."
        }
      ]
    }
  ],
  "tier_base_costs": {
    "independent": 0,
    "in_home": 3500,
    "assisted_living": 4500,
    "memory_care": 6500
  },
  "va_benefit_amounts": {
    "not_sure": 0,
    "veteran_alone": 2379,
    "veteran_with_spouse": 2829,
    "surviving_spouse": 1537
  },
  "navigation": {
    "back_to_hub": {
      "label": "Back to Hub",
      "icon": "üè†",
      "route": "hub_concierge"
    },
    "back_to_modules": {
      "label": "Back to Modules",
      "icon": "‚Üê"
    },
    "save_continue": {
      "label": "Save & Continue",
      "icon": "‚Üí",
      "type": "primary"
    }
  }
}
