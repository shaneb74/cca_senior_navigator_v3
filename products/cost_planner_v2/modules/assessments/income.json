{
  "key": "income",
  "title": "Income Sources",
  "icon": "\ud83d\udcb0",
  "description": "Monthly income from all sources",
  "estimated_time": "5-7 min",
  "required": true,
  "sort_order": 1,
  "sections": [
    {
      "id": "intro",
      "type": "intro",
      "title": "Income Assessment",
      "icon": "\ud83d\udcb0",
      "help_text": "Let's capture your income. Use Basic for a quick total or Advanced if you want to break it down.",
      "fields": [],
      "info_boxes": [
        {
          "type": "info",
          "message": "\ud83d\udca1 You can save and come back anytime. Your progress is automatically tracked."
        }
      ]
    },
    {
      "id": "household_context",
      "title": "Household Context",
      "icon": "\ud83d\udc65",
      "help_text": "Tell me about anyone who shares income or expenses with you.",
      "layout": "single_column",
      "fields": [
        {
          "key": "has_partner",
          "label": "Do you have a spouse or partner involved in your finances?",
          "type": "select",
          "required": false,
          "level": "basic",
          "options": [
            {
              "value": "no_partner",
              "label": "No partner"
            },
            {
              "value": "partner_separate",
              "label": "Yes, but we keep finances separate"
            },
            {
              "value": "partner_shared",
              "label": "Yes, we share income and expenses"
            }
          ],
          "default": "no_partner",
          "help": "This helps me understand whether to account for shared household income."
        },
        {
          "key": "partner_income_monthly",
          "label": "Partner's Monthly Contribution Toward Care",
          "type": "currency",
          "required": false,
          "level": "basic",
          "min": 0,
          "max": 50000,
          "step": 100,
          "default": 0,
          "help": "If your spouse/partner will help cover care, enter the amount they can reliably contribute each month.",
          "visible_if": {
            "field": "has_partner",
            "equals": "partner_shared"
          }
        },
        {
          "key": "shared_finance_notes",
          "label": "Anything important about how you share finances?",
          "type": "textarea",
          "required": false,
          "level": "advanced",
          "help": "Mention separate accounts, legal restrictions, or other details that affect how shared income can be used.",
          "visible_if": {
            "field": "has_partner",
            "not_equals": "no_partner"
          }
        }
      ],
      "info_boxes": [
        {
          "type": "info",
          "message": "\ud83d\udc65 If you keep finances separate, note what is realistically available for care so we can build the right plan."
        }
      ]
    },
    {
      "id": "social_security_pensions",
      "title": "Social Security & Pensions",
      "icon": "\ud83c\udfdb\ufe0f",
      "help_text": "Monthly Social Security and pension income",
      "layout": "single_column",
      "mode_config": {
        "supports_basic_advanced": true,
        "basic_mode_aggregate": "retirement_income_total",
        "advanced_mode_fields": [
          "ss_monthly",
          "pension_monthly"
        ]
      },
      "fields": [
        {
          "key": "retirement_income_total",
          "label": "Retirement Income (Total Monthly)",
          "type": "aggregate_input",
          "required": false,
          "min": 0,
          "max": 25000,
          "step": 100,
          "default": 0,
          "help": "Enter total monthly retirement income in Basic mode. Calculated automatically in Advanced mode.",
          "aggregate_from": [
            "ss_monthly",
            "pension_monthly"
          ],
          "mode_behavior": {
            "basic": {
              "display": "input",
              "editable": true,
              "distribution_strategy": "even",
              "help": "Enter your total monthly retirement income. We'll split it evenly between Social Security and pension."
            },
            "advanced": {
              "display": "calculated_label",
              "editable": false,
              "help": "Automatically calculated from Social Security and pension below."
            }
          },
          "unallocated": {
            "enabled": true,
            "show_in_mode": "advanced",
            "actions": ["clear_original", "move_to_other"],
            "other_field_key": "pension_monthly",
            "label": "Unallocated Retirement Income",
            "help": "Difference between your original estimate and allocated amounts. Not included in calculations."
          }
        },
        {
          "key": "ss_monthly",
          "label": "Social Security (Monthly)",
          "type": "currency",
          "required": false,
          "min": 0,
          "max": 5000,
          "step": 10,
          "default": 0,
          "help": "Total monthly benefits after deductions",
          "visible_in_modes": ["advanced"]
        },
        {
          "key": "pension_monthly",
          "label": "Pension (Monthly)",
          "type": "currency",
          "required": false,
          "min": 0,
          "max": 20000,
          "step": 100,
          "default": 0,
          "help": "Monthly pension income",
          "visible_in_modes": ["advanced"]
        }
      ],
      "info_boxes": [
        {
          "type": "info",
          "message": "\ud83d\udcca Social Security: Age 62 (reduced) vs. 66-67 (full) vs. 70 (max, up to 30% more). Average 2024: $1,907/month. Pension: Lifetime guaranteed income is valuable for care planning."
        }
      ]
    },
    {
      "id": "employment_other",
      "title": "Employment & Other Income",
      "icon": "\ud83d\udcbc",
      "help_text": "Current employment and other regular monthly income",
      "layout": "single_column",
      "mode_config": {
        "supports_basic_advanced": true,
        "basic_mode_aggregate": "employment_other_total",
        "advanced_mode_fields": [
          "employment_income",
          "other_income"
        ]
      },
      "fields": [
        {
          "key": "employment_other_total",
          "label": "Employment & Other (Total Monthly)",
          "type": "aggregate_input",
          "required": false,
          "min": 0,
          "max": 100000,
          "step": 100,
          "default": 0,
          "help": "Enter total monthly employment and other income in Basic mode. Calculated automatically in Advanced mode.",
          "aggregate_from": [
            "employment_income",
            "other_income"
          ],
          "mode_behavior": {
            "basic": {
              "display": "input",
              "editable": true,
              "distribution_strategy": "even",
              "help": "Enter your total monthly employment and other income. We'll split it evenly."
            },
            "advanced": {
              "display": "calculated_label",
              "editable": false,
              "help": "Automatically calculated from employment and other income below."
            }
          },
          "unallocated": {
            "enabled": true,
            "show_in_mode": "advanced",
            "actions": ["clear_original", "move_to_other"],
            "other_field_key": "other_income",
            "label": "Unallocated Employment/Other Income",
            "help": "Difference between your original estimate and allocated amounts. Not included in calculations."
          }
        },
        {
          "key": "employment_income",
          "label": "Employment Income (Monthly)",
          "type": "currency",
          "required": false,
          "min": 0,
          "max": 50000,
          "step": 100,
          "default": 0,
          "help": "Net monthly income from employment or self-employment",
          "visible_in_modes": ["advanced"]
        },
        {
          "key": "other_income",
          "label": "Other Monthly Income",
          "type": "currency",
          "required": false,
          "min": 0,
          "max": 50000,
          "step": 100,
          "default": 0,
          "help": "Any other regular monthly income not listed above",
          "visible_in_modes": ["advanced"]
        },
        {
          "key": "employment_status",
          "label": "Employment Status",
          "type": "select",
          "required": false,
          "options": [
            {
              "value": "not_employed",
              "label": "Not employed"
            },
            {
              "value": "part_time",
              "label": "Part-time employment"
            },
            {
              "value": "full_time",
              "label": "Full-time employment"
            },
            {
              "value": "self_employed",
              "label": "Self-employed"
            }
          ],
          "default": "not_employed",
          "help": "Current employment situation"
        }
      ],
      "info_boxes": [
        {
          "type": "info",
          "message": "\u26a0\ufe0f Social Security impact: Earnings above $22,320 (2024) may reduce SS benefits if claiming before full retirement age."
        }
      ]
    },
    {
      "id": "additional_income",
      "title": "Additional Income (Advanced)",
      "icon": "\ud83d\udcb5",
      "help_text": "Detailed breakdown of additional income sources",
      "layout": "single_column",
      "mode_config": {
        "supports_basic_advanced": true,
        "basic_mode_aggregate": "additional_income_total",
        "advanced_mode_fields": [
          "annuity_monthly",
          "retirement_distributions_monthly",
          "dividends_interest_monthly",
          "rental_income_monthly",
          "alimony_support_monthly",
          "ltc_insurance_monthly",
          "family_support_monthly"
        ]
      },
      "fields": [
        {
          "key": "additional_income_total",
          "label": "Additional Income (Total Monthly)",
          "type": "aggregate_input",
          "required": false,
          "min": 0,
          "max": 200000,
          "step": 100,
          "default": 0,
          "help": "Enter total additional monthly income in Basic mode. Calculated automatically in Advanced mode.",
          "aggregate_from": [
            "annuity_monthly",
            "retirement_distributions_monthly",
            "dividends_interest_monthly",
            "rental_income_monthly",
            "alimony_support_monthly",
            "ltc_insurance_monthly",
            "family_support_monthly"
          ],
          "mode_behavior": {
            "basic": {
              "display": "input",
              "editable": true,
              "distribution_strategy": "even",
              "help": "Enter your total additional monthly income from all other sources. We'll split it evenly across categories."
            },
            "advanced": {
              "display": "calculated_label",
              "editable": false,
              "help": "Automatically calculated from all additional income sources below."
            }
          },
          "unallocated": {
            "enabled": true,
            "show_in_mode": "advanced",
            "actions": ["clear_original", "move_to_other"],
            "other_field_key": "dividends_interest_monthly",
            "label": "Unallocated Additional Income",
            "help": "Difference between your original estimate and allocated amounts. Not included in calculations."
          },
        },
        {
          "key": "annuity_monthly",
          "label": "Annuity (Monthly)",
          "type": "currency",
          "required": false,
          "min": 0,
          "max": 20000,
          "step": 100,
          "default": 0,
          "help": "Monthly annuity payments",
          "visible_in_modes": ["advanced"],
        },
        {
          "key": "retirement_distributions_monthly",
          "label": "IRA/401(k) Distributions (Monthly)",
          "type": "currency",
          "required": false,
          "min": 0,
          "max": 50000,
          "step": 100,
          "default": 0,
          "help": "Monthly withdrawals from retirement accounts",
          "visible_in_modes": ["advanced"],
        },
        {
          "key": "dividends_interest_monthly",
          "label": "Dividends & Interest (Monthly)",
          "type": "currency",
          "required": false,
          "min": 0,
          "max": 50000,
          "step": 100,
          "default": 0,
          "help": "Monthly income from investments",
          "visible_in_modes": ["advanced"],
        },
        {
          "key": "rental_income_monthly",
          "label": "Rental Income (Monthly)",
          "type": "currency",
          "required": false,
          "min": 0,
          "max": 50000,
          "step": 100,
          "default": 0,
          "help": "Net monthly income from rental properties",
          "visible_in_modes": ["advanced"],
        },
        {
          "key": "alimony_support_monthly",
          "label": "Alimony/Support (Monthly)",
          "type": "currency",
          "required": false,
          "min": 0,
          "max": 50000,
          "step": 100,
          "default": 0,
          "help": "Monthly alimony or support payments received",
          "visible_in_modes": ["advanced"],
        },
        {
          "key": "ltc_insurance_monthly",
          "label": "Long-Term Care Insurance Benefits",
          "type": "currency",
          "required": false,
          "min": 0,
          "max": 50000,
          "step": 100,
          "default": 0,
          "help": "Monthly payout from long-term care insurance",
          "visible_in_modes": ["advanced"],
        },
        {
          "key": "family_support_monthly",
          "label": "Family Support (Monthly)",
          "type": "currency",
          "required": false,
          "min": 0,
          "max": 50000,
          "step": 100,
          "default": 0,
          "help": "Contributions from family for care costs",
          "visible_in_modes": ["advanced"],
        }
      ],
      "info_boxes": [
        {
          "type": "info",
          "message": "\ud83d\udca1 Breaking down income sources helps identify guaranteed vs. variable income for better care planning."
        }
      ]
    },
    {
      "id": "results",
      "type": "results",
      "title": "Income Assessment Complete",
      "icon": "\u2705",
      "fields": []
    }
  ],
  "summary": {
    "type": "calculated",
    "label": "Total Monthly Income",
    "formula": "sum(ss_monthly, pension_monthly, employment_income, other_income, annuity_monthly, retirement_distributions_monthly, dividends_interest_monthly, rental_income_monthly, alimony_support_monthly, ltc_insurance_monthly, family_support_monthly, partner_income_monthly)",
    "display_format": "${:,.0f}/month"
  },
  "output_contract": {
    "has_partner": "string",
    "partner_income_monthly": "number",
    "shared_finance_notes": "string",
    "retirement_income_total": "number",
    "ss_monthly": "number",
    "pension_monthly": "number",
    "employment_other_total": "number",
    "employment_status": "string",
    "employment_income": "number",
    "other_income": "number",
    "additional_income_total": "number",
    "annuity_monthly": "number",
    "retirement_distributions_monthly": "number",
    "dividends_interest_monthly": "number",
    "rental_income_monthly": "number",
    "alimony_support_monthly": "number",
    "ltc_insurance_monthly": "number",
    "family_support_monthly": "number",
    "total_monthly_income": "calculated"
  }
}